# Implementation Plan: Web Admin Console (2026 Edition)

This plan outlines the development of a high-performance, premium Web Admin Console for the Gymbros platform. It integrates seamlessly with the existing Supabase backend while introducing Role-Based Access Control (RBAC) and specific administrative functionalities.

## User Review Required

> [!IMPORTANT] > **Database Schema Update**: I will introduce a `profiles` table that mirrors `auth.users` to handle roles (`admin`, `staff`, `pt`, `member`). This is critical for RLS policies to function correctly on the web.
>
> **Project Location**: The web project will be initialized in `f:/Gymbros-Group06-23CLC01/apps/admin-web/`. This keeps the repository unified while separating the Mobile (Expo) and Web (Vite) build environments.

## Proposed Changes

### [Database & Security]

Update the Supabase schema to support advanced management features.

#### [NEW] `schema_v2_updates.sql`

- **Table: `profiles`**: Linked to `auth.users`, stores `full_name`, `avatar_url`, and `role`.
- **Table: `check_ins`**: Records barcode scans (`user_id`, `scanned_at`, `staff_id`).
- **Table: `tickets`**: Issue tracking system (`user_id`, `subject`, `description`, `status`, `assigned_staff_id`).
- **Table: `forum_posts`**: Community management.
- **RLS Policies**: Restrict access to `membership_plans` modification to `admin` only.

---

### [Admin Web Application]

A modern React application focused on efficiency and aesthetic excellence.

#### [NEW] `admin-web` Project Structure

- **Framework**: Vite + React + TypeScript.
- **UI Library**: Shadcn UI (Radix UI) + Tailwind CSS.
- **Forms/Validation**: React Hook Form + Zod.
- **Data Fetching**: TanStack Query (React Query).

#### Key Modules

- **Authentication**: Role-based routing using Supabase Auth.
- **User Management**: Advanced data table with filtering for Staff/PT/Members.
- **Barcode Hub**: Integration with `html5-qrcode` to use the laptop webcam for CODE128 scanning.
- **Reporting Engine**: Dynamic charts using `recharts` and CSV/PDF export using `react-csv` / `jspdf`.

---

## Verification Plan

### Automated Tests

- **Zod Validation**: Unit tests for form schemas.
- **RLS Verification**: SQL scripts to verify that `staff` cannot delete `membership_plans`.

### Manual Verification

- **Webcam Test**: Verify that the admin console can successfully decode the UUID barcode generated by the mobile app.
- **Role Switching**: Log in as `staff` to ensure `admin` menus (e.g., Financial Reports) are hidden and inaccessible.
